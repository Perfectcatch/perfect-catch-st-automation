# ============================================
# Perfect Catch ST Automation Server
# Environment Configuration
# ============================================

# Server Configuration
PORT=3001
NODE_ENV=development

# ============================================
# ServiceTitan API Credentials (REQUIRED)
# ============================================
SERVICE_TITAN_TENANT_ID=your_tenant_id
SERVICE_TITAN_CLIENT_ID=your_client_id
SERVICE_TITAN_CLIENT_SECRET=your_client_secret
SERVICE_TITAN_APP_KEY=your_app_key

# ============================================
# Database Configuration (REQUIRED for Pricebook Sync)
# ============================================
# PostgreSQL connection string with pgvector extension
DATABASE_URL=postgresql://user:password@localhost:5432/pricebook?schema=public

# ============================================
# OpenAI Configuration (REQUIRED for Chat Agent)
# ============================================
OPENAI_API_KEY=sk-your-openai-api-key

# ============================================
# Redis Configuration (Optional - for session storage)
# ============================================
REDIS_URL=redis://localhost:6379

# ============================================
# Security (Optional)
# ============================================
# Set this to require API key for all requests
# Leave empty to allow unauthenticated access
API_KEY=

# ============================================
# Rate Limiting (Optional)
# ============================================
# Time window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000
# Max requests per window (default: 100, set to 0 to disable)
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# Token Management (Optional)
# ============================================
# Seconds before token expiry to refresh (default: 300 = 5 minutes)
TOKEN_REFRESH_BUFFER_SECONDS=300

# ============================================
# Retry Configuration (Optional)
# ============================================
# Maximum retry attempts for 429/5xx errors
MAX_RETRIES=3
# Delay between retries in milliseconds
RETRY_DELAY_MS=1000

# ============================================
# Logging (Optional)
# ============================================
# Log level: fatal, error, warn, info, debug, trace
LOG_LEVEL=info

# ============================================
# Sync Scheduler Configuration (Optional)
# ============================================
# Full sync schedule (cron format) - default: daily at 2 AM
SYNC_FULL_CRON=0 2 * * *
# Incremental sync schedule (cron format) - default: every 6 hours
SYNC_INCREMENTAL_CRON=0 */6 * * *
# Enable/disable scheduler on startup
SYNC_SCHEDULER_ENABLED=true
